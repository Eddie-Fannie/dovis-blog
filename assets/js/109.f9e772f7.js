(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{384:function(s,e,a){"use strict";a.r(e);var t=a(10),n=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"git-flow的使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-flow的使用"}},[s._v("#")]),s._v(" git-flow的使用")]),s._v(" "),e("blockquote",[e("p",[e("code",[s._v("git flow")]),s._v(" 的特点便是不同的分支充当不一样的角色，并且有规定的使用场景和用法。有用于功能开发的"),e("code",[s._v("dev")]),s._v(" 分支，有用于发布前准备，后期维护修复bug的分支。")])]),s._v(" "),e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),e("p",[s._v("最近接手了部门的一个项目，用到了"),e("code",[s._v("git-flow")]),s._v("进行分支管理开发，所以就抽空学习了一下git-flow，提高自己团队协作开发的效率，也丰富了自己的技术知识栈。")]),s._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("p",[s._v("部门开发用MacOs，所以就可以直接使用"),e("code",[s._v("homebrew")]),s._v("\t进行下载安装")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("brew "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" git-flow\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("查看版本")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("git-flow version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",[e("li",[e("p",[e("code",[s._v("git-flow")]),s._v(" 使用两个分支来记录项目开发的历史，分别是用于"),e("strong",[s._v("功能开发的dev分支")]),s._v("，还有用于"),e("strong",[s._v("保存官方发布历史的master分支")]),s._v("。要记住的是，dev分支用于集成项目各种功能的开发；而master分支可以打上标签（"),e("code",[s._v("tag")]),s._v("）方便管理。----"),e("code",[s._v("master")]),s._v(" 分支")])]),s._v(" "),e("li",[e("p",[s._v("创建新的功能开发分支的时候，父分支应该选择"),e("code",[s._v("dev")]),s._v(" 分支。但是不要在"),e("code",[s._v("dev")]),s._v("分支直接开发，而是创建特性分支，同时这个分支也可以选择推送到远程仓库，有利于团队协作开发。当功能开发完成时，或者工期到点时，可以把功能代码合并（"),e("code",[s._v("merge")]),s._v(" ）到"),e("code",[s._v("dev")]),s._v(" 分支，永远秉承着功能代码不直接提交到"),e("code",[s._v("master")]),s._v("分支。-----"),e("code",[s._v("feature")]),s._v("分支。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("// 创建feature分支 如test分支\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow feature start "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n// 完成该分支\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow feature finish "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("当预定发布日期临近时，可以基于开发分支新建一个用于产品发布的分支。在这个分支上修复bug,写写文档工作等不会增加大量功能代码操作。发布工作准备就绪时，就把这个分支合并到"),e("code",[s._v("master")]),s._v("分支，并用版本号打上标签，如何打标签后面会补充说明。"),e("strong",[s._v("同时也会把发布分支合并到"),e("code",[s._v("dev")]),s._v("分支中去，这样方便在一次发布同时团队可以继续开发新功能")]),s._v(" 。------"),e("code",[s._v("release")]),s._v("分支")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("// 创建release分支：\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow release start v.1.0\n// 修改完bug之后结束分支\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow release finish v.1.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("blockquote",[e("p",[s._v("创建该分支后会涉及到的内容：")]),s._v(" "),e("ul",[e("li",[s._v("release分支将代码合并到master分支")]),s._v(" "),e("li",[s._v("同时会打上标签tag")]),s._v(" "),e("li",[s._v("release分支将内容合并到dev分支")]),s._v(" "),e("li",[s._v("release分支被删除")])])])]),s._v(" "),e("li",[e("p",[s._v("当我们项目发布后，日后的维护工作我们需要开一个独立的分支"),e("code",[s._v("Hotfix")]),s._v(" 这是唯一一种可以以"),e("code",[s._v("master")]),s._v("为父分支的分支。当维护工作做好后就要把代码合并到master和dev分支，并给master分支打上新版本标签。")])])]),s._v(" "),e("h2",{attrs:{id:"具体开发实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#具体开发实例"}},[s._v("#")]),s._v(" 具体开发实例")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("执行"),e("code",[s._v("git-flow init")]),s._v("初始化一下项目")]),s._v(" "),e("blockquote",[e("p",[s._v("利用一个反馈模块项目来初始化项目结构，可以看到如下内容，均按回车进行下一步。这个时候项目的分支默认到开发分支下，可以输入"),e("code",[s._v("git branch")]),s._v("查看当前分支")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/dovis-blog/git/gitflow-init@2x.png",alt:"img"}})])]),s._v(" "),e("li",[e("p",[s._v("自动基于开发分支下新建特性分支，执行"),e("code",[s._v("git flow feature start test")]),s._v(",test为特性分支名字，创建成功会出现下面这些信息。")]),s._v(" "),e("p",[e("img",{attrs:{src:"/dovis-blog/git/create-feature@2x.png",alt:"img"}})])]),s._v(" "),e("li",[e("p",[s._v("完成特性分支功能开发之后需要"),e("code",[s._v("git add")]),s._v(" "),e("code",[s._v("git commit -m ''")]),s._v(" 然后再"),e("code",[s._v("git flow feature finish test")]),s._v("结束特性分支。")]),s._v(" "),e("blockquote",[e("p",[s._v("平时开发项目的时候，大家可能同时开发一个特性分支，所以需要将特性分支推送到远程仓库。")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("git flow feature publish test")]),s._v(" ，记得代码要合并到开发分支dev。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/dovis-blog/git/publish-feature@2x.png",alt:"img"}})])]),s._v(" "),e("li",[e("p",[s._v("创建release分支来管理分布的版本")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("➜  feedback-all git:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("develop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow release start v1.0\n切换到一个新分支 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'release/v1.0'")]),s._v("\n\nSummary of actions:\n- A new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'release/v1.0'")]),s._v(" was created, based on "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'develop'")]),s._v("\n- You are now on branch "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'release/v1.0'")]),s._v("\n\nFollow-up actions:\n- Bump the version number now"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n- Start committing last-minute fixes "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" preparing your release\n- When done, run:\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow release finish "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'v1.0'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("blockquote",[e("p",[s._v("release使用版本号来命名分支，这样当我们完成release分支时，git-flow会自动提交一些标记。")]),s._v(" "),e("p",[e("code",[s._v("git flow release finish v1.0")]),s._v("这个命令会进行下面一系列：")]),s._v(" "),e("ol",[e("li",[s._v("拉取远程仓库来保持代码的最新状态。")]),s._v(" "),e("li",[s._v("release分支内容会合并到master和develop两个分支中去。")]),s._v(" "),e("li",[s._v("会被标记上tag---这里是v1.0")]),s._v(" "),e("li",[s._v("release分支删除，并且回到开发分支。")])])])]),s._v(" "),e("li",[e("p",[s._v("Hotfix分支：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow hotfix start v.1.0 // 创建\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" flow hotfix finish v.1.0 //完成（结束）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);