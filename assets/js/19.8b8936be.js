(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{295:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"产品设计协同平台项目性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#产品设计协同平台项目性能优化"}},[s._v("#")]),s._v(" 产品设计协同平台项目性能优化")]),s._v(" "),a("h2",{attrs:{id:"构建优化篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建优化篇"}},[s._v("#")]),s._v(" 构建优化篇")]),s._v(" "),a("p",[s._v("优化前：(已经有提前优化过一些了，比如图片压缩，代码合并，插件按需加载)")]),s._v(" "),a("p",[a("img",{attrs:{src:"/dovis-blog/other/75.png",alt:"img"}})]),s._v(" "),a("blockquote",[a("p",[s._v("可见最大的 "),a("code",[s._v("vendor")]),s._v(" 包居然有 "),a("code",[s._v("3.68MB")]),s._v("（经过 "),a("code",[s._v("gzip")]),s._v(" 压缩后），没有做额外配置的话，"),a("code",[s._v("webpack")]),s._v(" 将所有的第三方依赖都打入了这个包，如果引入依赖越来越多，那么这个包就会越来越大。另外，系统本身的逻辑打的包也达到了 "),a("code",[s._v("698kb")]),s._v("。可以利用"),a("code",[s._v("webpack-bundle-analyzer")]),s._v("得到上面这个图和下面这个可视化图。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/dovis-blog/other/76.png",alt:"img"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" webpack-bundle-analyzer\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"use_analyzer=true npm run serve"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# package.json加入这个命令")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" BundleAnalyzerPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack-bundle-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BundleAnalyzerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("chainWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("config")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_analyzer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分析")]),s._v("\n      config\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack-bundle-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BundleAnalyzerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("CDN")]),s._v(" 的工作原理是将源站的资源缓存到位于全球各地的 "),a("code",[s._v("CDN")]),s._v(" 节点上，用户请求资源时，就近返回节点上缓存的资源，而不需要每个用户的请求都回您的源站获取，避免网络拥塞、缓解源站压力，保证用户访问资源的速度和体验。因为打包后的产物本身也是上传到 "),a("code",[s._v("CDN")]),s._v(" 的。但是我们要做的是将体积较大的第三方依赖单独拆出来放到 "),a("code",[s._v("CDN")]),s._v(" 上，这样这个依赖既不会占用打包资源，也不会影响最终包体积。"),a("strong",[s._v("如果我们想引用一个库，但是又不想让 "),a("code",[s._v("webpack")]),s._v(" 打包，并且又不影响我们在程序中以 "),a("code",[s._v("import")]),s._v("、"),a("code",[s._v("require")]),s._v(" 或者 "),a("code",[s._v("window/global")]),s._v(" 全局等方式进行使用，那就可以通过配置 "),a("code",[s._v("externals")]),s._v("。")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);