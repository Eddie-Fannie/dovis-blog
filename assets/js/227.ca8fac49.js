(window.webpackJsonp=window.webpackJsonp||[]).push([[227],{502:function(s,t,a){"use strict";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"es6模块化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es6模块化"}},[s._v("#")]),s._v(" ES6模块化")]),s._v(" "),t("blockquote",[t("p",[s._v("ES6模块不是对象，而是通过"),t("code",[s._v("export")]),s._v("命令显示地指定输出的代码，再通过"),t("code",[s._v("import")]),s._v("命令输入。这种加载称为编译时加载或者静态加载。这样能保证在编译时就确定模块之间的依赖关系，每个模块的输入和输出也都是确定的。而"),t("code",[s._v("CommonJs/AMD")]),s._v("模块无法保证在编译时确定这些内容，都是运行时确定。")])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("ul",[t("li",[s._v("静态性带来的限制\n"),t("ul",[t("li",[s._v("只能在文件顶部引入依赖")]),s._v(" "),t("li",[s._v("导出的变量类型受到严格限制")]),s._v(" "),t("li",[s._v("变量不允许被重新绑定，引入的模块名只能是字符串变量，即不可以动态确定依赖。")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("这样的限制在语言层的好处就是：我们可以通过分析作用域，得出代码的变量所属的作用域以及他们之间的引用关系，进而可以推导出变量和导入依赖变量之间的引用关系，在没有明显的引用时，可以对代码进行去冗余。")])]),s._v(" "),t("ul",[t("li",[s._v("设计成静态的好处：\n"),t("ul",[t("li",[s._v("通过静态分析，我们能够分析出导入的依赖。如果导入的模块没有被使用，我们便可以通过"),t("code",[s._v("tree shaking")]),s._v("等手段减少代码提交，进而提升运行性能。")])])])])]),s._v(" "),t("h2",{attrs:{id:"严格模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#严格模式"}},[s._v("#")]),s._v(" 严格模式")]),s._v(" "),t("p",[s._v("ES6模块自动采用严格模式；")]),s._v(" "),t("ul",[t("li",[s._v("变量必须声明后使用")]),s._v(" "),t("li",[s._v("函数的参数不能有同名属性")]),s._v(" "),t("li",[s._v("不能使用"),t("code",[s._v("with")]),s._v("语句")]),s._v(" "),t("li",[s._v("不能删除变量"),t("code",[s._v("delete prop")])]),s._v(" "),t("li",[s._v("禁止使用"),t("code",[s._v("this")]),s._v("指向全局对象")]),s._v(" "),t("li",[s._v("不能使用"),t("code",[s._v("fn.caller/fn.arguments")]),s._v("获取函数调用的堆栈\n等限制。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// profile.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" firstName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'linjiaheng'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" lastName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dovis'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("firstName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" lastName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("优先考虑这种导出的方式，可以在脚本底部直观看出导出哪些变量。")]),s._v(" "),t("h2",{attrs:{id:"模块导出规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块导出规则"}},[s._v("#")]),s._v(" 模块导出规则")]),s._v(" "),t("ol",[t("li",[s._v("通常"),t("code",[s._v("export")]),s._v("输出的变量就是本来的名字，可以使用"),t("code",[s._v("as")]),s._v("关键字重命名。可以用不同名字输出多次。")]),s._v(" "),t("li",[t("code",[s._v("export")]),s._v("命令规定的是对外的接口，必须与模块内部的变量建立一一对应的关系")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 报错")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 报错")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" m\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 正确")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//后面三种正确方式规定了对外的接口m")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[t("code",[s._v("export")]),s._v("语句输出的接口与其对应的值是动态绑定关系的，即通过该接口可以取到模块内部实时的值。")]),s._v(" "),t("li",[t("code",[s._v("export")]),s._v("语句可以出现在模块的任何位置，只要处于模块顶层就可以。")]),s._v(" "),t("li",[t("code",[s._v("export")]),s._v("通过接口输出的是同一个值，不同的脚本加载这个接口得到的都是同样的实例。")])]),s._v(" "),t("h2",{attrs:{id:"模块导入规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块导入规则"}},[s._v("#")]),s._v(" 模块导入规则")]),s._v(" "),t("ol",[t("li",[s._v("导入的大括号中的变量名必须与被导入模块对外接口的名称相同。如果想为输入的变量重新取一个名字，要在"),t("code",[s._v("import")]),s._v("命令中使用"),t("code",[s._v("as")]),s._v("关键字，将输入的变量重命名。")]),s._v(" "),t("li",[t("code",[s._v("import")]),s._v("命令具有提升效果，会提升到整个模块的头部并首先执行。这种行为的本质是"),t("code",[s._v("import")]),s._v("命令是编译阶段执行的，在代码运行之前。")]),s._v(" "),t("li",[t("code",[s._v("import")]),s._v("静态执行，所以不能使用表达式和变量。只有在运行时才能得到结果的语法结构。")]),s._v(" "),t("li",[t("code",[s._v("import")]),s._v("语句会执行所加载的模块，所以这种情况成立。多次重复执行同一句，只会执行一次。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("如果同一个模块，同时使用了CommonJS的"),t("code",[s._v("require")]),s._v("命令和ES6的"),t("code",[s._v("import")]),s._v("语句，由于"),t("code",[s._v("import")]),s._v("在静态解析阶段中执行，所以最早被执行。")]),s._v(" "),t("li",[t("code",[s._v("import * as 名称 from ''")]),s._v("用来加载整个对象")]),s._v(" "),t("li",[t("code",[s._v("import")]),s._v("无法在运行时加载模块。")])]),s._v(" "),t("h2",{attrs:{id:"export-default"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#export-default"}},[s._v("#")]),s._v(" export default")]),s._v(" "),t("p",[s._v("用该语句导出的接口，可以用"),t("code",[s._v("import")]),s._v("语句指定任意名字，不使用大括号。因为"),t("code",[s._v("export default")]),s._v("只能使用一次。")]),s._v(" "),t("p",[s._v("本质上，"),t("code",[s._v("export default")]),s._v("就是输出一个叫做"),t("code",[s._v("default")]),s._v("的变量或方法，然后系统运行我们为他取任意名字，所以可以这么写；")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// module.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("y")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("y\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("add "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等同于")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" add"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'modules'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等同于")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'modules'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("strong",[s._v("正是因为"),t("code",[s._v("export default")]),s._v("语句其实就是输出一个叫做"),t("code",[s._v("default")]),s._v("的变量，所以后面不能跟变量声明语句")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 错误")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 正确")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"import和export复合写法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#import和export复合写法"}},[s._v("#")]),s._v(" import和export复合写法")]),s._v(" "),t("p",[s._v("如果在同一个模块之中先输入后输出同一个模块，"),t("code",[s._v("import")]),s._v("语句可以与"),t("code",[s._v("export")]),s._v("语句写在一起")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my_module'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等同于")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my_module'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"import"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[s._v("#")]),s._v(" import()")]),s._v(" "),t("p",[s._v("因为"),t("code",[s._v("import")]),s._v("命令无法动态加载模块，所以提案引入了"),t("code",[s._v("import()")]),s._v("函数完成动态加载。"),t("code",[s._v("import")]),s._v("命令可以接收什么参数，该函数就可以接收什么参数。\n"),t("code",[s._v("import()")]),s._v("函数类似"),t("code",[s._v("Node")]),s._v("的"),t("code",[s._v("require")]),s._v("语句，区别是前者异步加载，后者同步加载。")]),s._v(" "),t("ul",[t("li",[s._v("该函数的适用场合\n"),t("ul",[t("li",[s._v("在需要的时候加载某个模块---按需加载")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("button"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'click'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("event")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dialogBox.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("dialogBox")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        dialogBox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("条件加载")]),s._v(" "),t("li",[s._v("动态的模块路径")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据函数f的返回结果加载不同的模块。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("import()")]),s._v("加载模块成功之后，这个模块会作为一个对象当作"),t("code",[s._v("then")]),s._v("方法的参数，因此可以适用对象解构赋值的语法获取输出接口。")])]),s._v(" "),t("h2",{attrs:{id:"node加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node加载"}},[s._v("#")]),s._v(" Node加载")]),s._v(" "),t("ol",[t("li",[s._v("在静态分析阶段，一个模块脚本只要有一行"),t("code",[s._v("import/export")]),s._v("语句，"),t("code",[s._v("Node")]),s._v("就会认为该脚本为"),t("code",[s._v("ES6")]),s._v("模块，否则为"),t("code",[s._v("CommonJS")]),s._v("模块。如果不输出任何接口，但是希望"),t("code",[s._v("Node")]),s._v("认为为"),t("code",[s._v("ES6")]),s._v("模块，可以:")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("node从9.0版本开始支持ES模块化，执行脚本启动时需要加上"),t("code",[s._v("--experimental-modules")]),s._v("。不过这要求文件名后缀为"),t("code",[s._v(".mjs")]),s._v("。另外一种使用ES模块化的方式是安装"),t("code",[s._v("babel-cli")]),s._v("和"),t("code",[s._v("babel-preset-env")]),s._v("，配置"),t("code",[s._v(".babelrc")]),s._v("文件后，执行"),t("code",[s._v("./node_modules/.bin/bable-node")]),s._v("或者"),t("code",[s._v("npx babel-node")])])]),s._v(" "),t("h2",{attrs:{id:"在浏览器中快速使用es模块化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在浏览器中快速使用es模块化"}},[s._v("#")]),s._v(" 在浏览器中快速使用ES模块化")]),s._v(" "),t("p",[s._v("只需要在"),t("code",[s._v("script")]),s._v("标签上添加一个"),t("code",[s._v("type=module")]),s._v("属性。不支持ES模块的浏览器，只需要通过"),t("code",[s._v("nomodule")]),s._v("属性来执行某脚本的回退方案。")])])}),[],!1,null,null,null);t.default=n.exports}}]);