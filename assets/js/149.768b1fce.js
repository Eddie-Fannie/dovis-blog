(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{528:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ajax原生"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax原生"}},[t._v("#")]),t._v(" ajax原生")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("JavaScript")]),t._v("执行异步网络请求,有了"),s("code",[t._v("Ajax")]),t._v("之后，就可以实现在网页不跳转不刷新的情况下，在网页后台提交数据，部分更新页面内容。核心是"),s("code",[t._v("XMLHttpRequest")]),t._v("对象。")])]),t._v(" "),s("h2",{attrs:{id:"实现流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现流程"}},[t._v("#")]),t._v(" 实现流程")]),t._v(" "),s("ul",[s("li",[t._v("创建"),s("code",[t._v("XMLHttpRequest")]),t._v("对象")]),t._v(" "),s("li",[t._v("打开请求地址，初始化数据")]),t._v(" "),s("li",[t._v("发送请求数据")]),t._v(" "),s("li",[t._v("监听回调函数状态")]),t._v(" "),s("li",[t._v("收到服务器返回的应答结果")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadXMLDoc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    xmlhttp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("XMLHttpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        xmlhttp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ActiveXObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        xmlhttp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActiveXObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Microsoft.XMLHTTP'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xmlhttp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true默认异步，表示该脚本会在send()方法之后继续执行，而不等待来自服务器的响应。")]),t._v("\n        xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onreadystatechange "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state_Change"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Your browser does not support XMLHTTP'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("state_Change")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" xmlhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Problem retrieving XML data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadXMLDoc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://iconcool.kingdee.com/index/mix'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("ol",[s("li",[t._v("使用"),s("code",[t._v("XHR")]),t._v("对象时，要调用第一个方法是"),s("code",[t._v("open()")]),t._v("，接收三个参数：要发送的请求类型，请求的"),s("code",[t._v("URL")]),t._v("，是否异步发送请求的布尔值。调用"),s("code",[t._v("open()")]),t._v("方法不会真正的发送请求，而只是启动一个请求以备发送。")]),t._v(" "),s("li",[s("code",[t._v("send()")]),t._v("方法接收一个参数，即要作为请求主体发送的数据。如果不需要则传入"),s("code",[t._v("null")])]),t._v(" "),s("li",[s("code",[t._v("responseText")]),t._v("：作为响应主体被返回的文本。")]),t._v(" "),s("li",[s("code",[t._v("responseXML")]),t._v("：如果响应内容类型是"),s("code",[t._v("text/xml")]),t._v("或"),s("code",[t._v("application/xml")]),t._v("，这个属性中将保存包含着响应数据的"),s("code",[t._v("XML DOM")]),t._v("文档")]),t._v(" "),s("li",[s("code",[t._v("status")]),t._v("： 响应的"),s("code",[t._v("HTTP")]),t._v("状态。")]),t._v(" "),s("li",[s("code",[t._v("statusText")]),t._v("："),s("code",[t._v("HTTP")]),t._v("状态的说明。")])]),t._v(" "),s("p",[t._v("多数情况下我们要发送异步请求，才能让Javascript继续执行而不必等待响应。此时可以检测"),s("code",[t._v("XHR")]),t._v("对象的"),s("code",[t._v("readyState")]),t._v("属性，该属性表示请求/响应过程的当前活动阶段。取值情况：")]),t._v(" "),s("ul",[s("li",[t._v("0：未初始化。尚未调用"),s("code",[t._v("open()")]),t._v("方法")]),t._v(" "),s("li",[t._v("1：启动，已经调用"),s("code",[t._v("open()")]),t._v("方法，但尚未调用"),s("code",[t._v("send()")]),t._v("方法")]),t._v(" "),s("li",[t._v("2：发送，已经调用"),s("code",[t._v("send()")]),t._v("方法，但尚未接收到响应")]),t._v(" "),s("li",[t._v("3：接收：已经接收到部分响应数据")]),t._v(" "),s("li",[t._v("4：完成：已经接收到全部数据，而且已经在客户端中使用。")])]),t._v(" "),s("p",[t._v("只要"),s("code",[t._v("readyState")]),t._v("属性的值由一个值变成另一个值，都会触发一次"),s("code",[t._v("readystatechange")]),t._v("事件。不过在调用"),s("code",[t._v("open()")]),t._v("之前指定"),s("code",[t._v("onreadystatechange")]),t._v("事件处理程序才能确保跨浏览器兼容性。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createXHR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("304")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Response was unsuccessful:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'get'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ol",[s("li",[t._v("使用"),s("code",[t._v("post")]),t._v("方式发送数据时，在调用"),s("code",[t._v("send")]),t._v("方法时，需要设置请求的"),s("code",[t._v("MIME")]),t._v("类型")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("application/x-www-form-urlencoded")]),t._v(":提交的数据按照 "),s("code",[t._v("key1=val1&key2=val2")]),t._v(" 的方式进行编码，"),s("code",[t._v("key")]),t._v(" 和 "),s("code",[t._v("val")]),t._v(" 会进行了 "),s("code",[t._v("URL")]),t._v(" 转码")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("multipart/form-data")]),t._v("表单上传文件")]),t._v(" "),s("li",[s("code",[t._v("application/json")])]),t._v(" "),s("li",[s("code",[t._v("text/xml")])])]),t._v(" "),s("p",[t._v("我们现在一般这样来使用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("XML")]),t._v(" 存储数据，存储配置文件等需要结构化存储的地方使用；")]),t._v(" "),s("li",[t._v("数据传输、数据交互使用"),s("code",[t._v("JSON")]),t._v("；")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("get/post")]),t._v("在ajax请求中传参的差异：")])]),t._v(" "),s("ul",[s("li",[t._v("我们要在发送"),s("code",[t._v("get")]),t._v("请求时携带数据，只需要在调用 "),s("code",[t._v("open()")]),t._v(" 方法时，将数据写在第二个参数的"),s("code",[t._v("URL")]),t._v("的 "),s("code",[t._v("?")]),t._v(" 后面即可")]),t._v(" "),s("li",[t._v("发送"),s("code",[t._v("post")]),t._v("请求的过程几乎和"),s("code",[t._v("get")]),t._v("请求一样，唯一不一样的是数据的传递。大家都知道"),s("code",[t._v("post")]),t._v("请求的数据是放在请求体中的，因此我们需要调用"),s("code",[t._v("xhr")]),t._v("对象上的 "),s("code",[t._v("setRequestHeader()")]),t._v(" 方法来模仿表单提交时的内容类型")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("xhr.setRequestHeader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nxhr.send"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'query=4&em=0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])]),t._v(" "),s("h2",{attrs:{id:"ajax的优缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax的优缺点"}},[t._v("#")]),t._v(" Ajax的优缺点")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("优点：")]),t._v(" "),s("ul",[s("li",[t._v("页面无刷新，在页面内与服务器通信，减少用户等待时间，增强了用户体验。")]),t._v(" "),s("li",[t._v("使用异步方式与服务器通信，响应速度更快。")]),t._v(" "),s("li",[t._v("可以把一些原本服务器的工作转接到客户端，利用客户端闲置的能力来处理，减轻了服务器和带宽的负担，节约空间和宽带租用成本。")]),t._v(" "),s("li",[t._v("基于标准化的并被广泛支持的技术，不需要下载插件或者小程序。")])])]),t._v(" "),s("li",[s("p",[t._v("缺点：")]),t._v(" "),s("ul",[s("li",[t._v("无法进行操作的后退，即不支持浏览器的页面后退。")]),t._v(" "),s("li",[t._v("对搜索引擎的支持比较弱。")]),t._v(" "),s("li",[t._v("可能会影响程序中的异常处理机制。")]),t._v(" "),s("li",[t._v("安全问题，对一些网站攻击，如"),s("code",[t._v("csrf、xxs、sql")]),t._v("注入等不能很好地防御。")])])])])]),t._v(" "),s("h2",{attrs:{id:"jquery中的ajax请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jquery中的ajax请求"}},[t._v("#")]),t._v(" jquery中的Ajax请求")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("$.ajax()")]),t._v("返回其创建的 "),s("code",[t._v("XMLHttpRequest")]),t._v(" 对象。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dataType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Resource/GetList.ashx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" dataurl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("通过远程 "),s("code",[t._v("HTTP GET")]),t._v(" 请求载入信息。")])]),t._v(" "),s("blockquote",[s("p",[t._v("相比于复杂的"),s("code",[t._v("$.ajax")]),t._v("而言，"),s("code",[t._v("GET")]),t._v("请求功能则显得更加简单，请求成功时可调用回调函数。当然如果需要在出错时执行函数，那么还请使用"),s("code",[t._v("$.ajax")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.cgi'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'john'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("通过远程 "),s("code",[t._v("HTTP POST")]),t._v(" 请求载入信息。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.cgi'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'john'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("通过 "),s("code",[t._v("HTTP GET")]),t._v(" 请求载入 "),s("code",[t._v("JSON")]),t._v(" 数据。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("each")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<img/>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("media"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#images"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h2",{attrs:{id:"http头部信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http头部信息"}},[t._v("#")]),t._v(" "),s("code",[t._v("HTTP")]),t._v("头部信息")]),t._v(" "),s("p",[t._v("发送请求时，请求头部信息")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Accept")]),t._v("：浏览器能够处理的内容类型")]),t._v(" "),s("li",[s("code",[t._v("Accept-Charset")]),t._v("：浏览器能够显示的字符集")]),t._v(" "),s("li",[s("code",[t._v("Accept-Encoding")]),t._v("：浏览器能够处理的压缩编码")]),t._v(" "),s("li",[s("code",[t._v("Accept-Language")]),t._v("：浏览器当前设置的语言")]),t._v(" "),s("li",[s("code",[t._v("Connection")]),t._v("：浏览器与服务器之间连接的类型")]),t._v(" "),s("li",[s("code",[t._v("Cookie")]),t._v("：当前页面设置的任何"),s("code",[t._v("Cookie")])]),t._v(" "),s("li",[s("code",[t._v("Host")]),t._v("：发出请求的页面所在域")]),t._v(" "),s("li",[s("code",[t._v("Referer")]),t._v("：发出请求的页面的"),s("code",[t._v("URL")]),t._v("（一个拼错的字段，应该为"),s("code",[t._v("referrer")]),t._v("）")]),t._v(" "),s("li",[s("code",[t._v("User-Agent")]),t._v("：浏览器的用户代理字符串")])]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("setRequestHeader()")]),t._v("方法可以设置自定义的请求头部信息。接收头部字段和头部字段的值两个参数。要成功发送请求头部信息，必须在调用"),s("code",[t._v("open()")]),t._v("方法之后且调用"),s("code",[t._v("send()")]),t._v("方法之前调用该方法。服务端接收到这种自定义的头部信息之后，可以执行相应的后续操作。调用"),s("code",[t._v("XHR")]),t._v("对象的"),s("code",[t._v("getResponseHeader()")]),t._v("方法并传入头部字段名称，可以取得相应的响应头部信息。而调用"),s("code",[t._v("getAllResponseHeaders()")]),t._v("方法则可以取得一个包含搜友头部信息的长字符串。")]),t._v(" "),s("h2",{attrs:{id:"get-post"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-post"}},[t._v("#")]),t._v(" "),s("code",[t._v("GET")]),t._v("/"),s("code",[t._v("POST")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("GET")]),t._v(" "),s("ul",[s("li",[t._v("可以将查询字符串参数追加到"),s("code",[t._v("URL")]),t._v("末尾，以便将信息发送给服务器。查询字符串每个参数的名称和值都必须使用"),s("code",[t._v("encodeURIComponent")]),t._v("进行编码才能放到"),s("code",[t._v("URL")]),t._v("末尾。")])])]),t._v(" "),s("li",[s("code",[t._v("POST")]),t._v(" "),s("ul",[s("li",[t._v("参数放在"),s("code",[t._v("body")]),t._v("中")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("POST")]),t._v("方法更安全？\n从传输的角度来说，他们都是不安全的，因为 "),s("code",[t._v("HTTP")]),t._v(" 在网络上是明文传输的，只要在网络节点上捉包，就能完整地获取数据报文。要想安全传输，就只有加密，也就是 "),s("code",[t._v("HTTPS")]),t._v("。只要记得一般情况下，私密数据传输用"),s("code",[t._v("POST + body")]),t._v("就好。")])]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("GET")]),t._v("参数，浏览器地址栏输入参数长度限制\n"),s("code",[t._v("HTTP")]),t._v(" 协议没有 "),s("code",[t._v("Body")]),t._v(" 和 "),s("code",[t._v("URL")]),t._v(" 的长度限制，对 "),s("code",[t._v("URL")]),t._v(" 限制的大多是浏览器和服务器的原因。服务器是因为处理长 "),s("code",[t._v("URL")]),t._v(" 要消耗比较多的资源，为了性能和安全（防止恶意构造长"),s("code",[t._v("URL")]),t._v(" 来攻击）考虑，会给 "),s("code",[t._v("URL")]),t._v(" 长度加限制。"),s("code",[t._v("URL")]),t._v("这种东西必须当作一个整体看待，无法一块一块处理，于是就处理一个请求时必须分配一整块足够大的内存。如果"),s("code",[t._v("URL")]),t._v("太长，而并发又很高，就容易挤爆服务器的内存；")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("code",[t._v("GET")]),t._v("和"),s("code",[t._v("POST")]),t._v("本质上两者没有任何区别。他们都是"),s("code",[t._v("HTTP")]),t._v("协议中的请求方法。底层实现都是基于"),s("code",[t._v("TCP/IP")]),t._v("协议。上述的所谓区别，只是浏览器厂家根据约定，做得限制而已。"),s("code",[t._v("HTTP")]),t._v("请求，最初设定了八种方法。这八种方法本质上没有任何区别。只是让请求，更加有语义而已。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("浏览器使用的"),s("code",[t._v("GET/POST")]),t._v("：指浏览器中非"),s("code",[t._v("ajax")]),t._v("的"),s("code",[t._v("http")]),t._v("请求。浏览器用"),s("code",[t._v("GET")]),t._v("请求来获取一个"),s("code",[t._v("html")]),t._v("页面/图片等资源；用"),s("code",[t._v("POST")]),t._v("来提交一个"),s("code",[t._v("<form>")]),t._v("表单，并得到一个结果的网页。")]),t._v(" "),s("ul",[s("li",[t._v("因为"),s("code",[t._v("GET")]),t._v("因为是读取，就可以对"),s("code",[t._v("GET")]),t._v("请求的数据做缓存。这个缓存可以做到浏览器本身上（彻底避免浏览器发请求），也可以做到代理上（如"),s("code",[t._v("nginx")]),t._v("），或者做到"),s("code",[t._v("server")]),t._v("端（用"),s("code",[t._v("Etag")]),t._v("，至少可以减少带宽消耗）")]),t._v(" "),s("li",[t._v("在页面里"),s("code",[t._v("<form>")]),t._v(" 标签会定义一个表单。点击其中的"),s("code",[t._v("submit")]),t._v("元素会发出一个"),s("code",[t._v("POST")]),t._v("请求让服务器做一件事。这件事往往是有副作用的，不幂等的。所以浏览器实现为不能把"),s("code",[t._v("POST")]),t._v("请求保存为书签")]),t._v(" "),s("li",[t._v("当浏览器发出一个"),s("code",[t._v("GET")]),t._v("请求时，就意味着要么是用户自己在浏览器的地址栏输入，要不就是点击了"),s("code",[t._v("html")]),t._v("里"),s("code",[t._v("a")]),t._v("标签的"),s("code",[t._v("href")]),t._v("中的"),s("code",[t._v("url")]),t._v("。所以其实并不是"),s("code",[t._v("GET")]),t._v("只能用"),s("code",[t._v("url")]),t._v("，而是浏览器直接发出的"),s("code",[t._v("GET")]),t._v("只能由一个"),s("code",[t._v("url")]),t._v("触发。所以没办法，"),s("code",[t._v("GET")]),t._v("上要在"),s("code",[t._v("url")]),t._v("之外带一些参数就只能依靠"),s("code",[t._v("url")]),t._v("上附带"),s("code",[t._v("querystring")]),t._v("。但是"),s("code",[t._v("HTTP")]),t._v("协议本身并没有这个限制。")]),t._v(" "),s("li",[t._v("浏览器的"),s("code",[t._v("POST")]),t._v("请求都来自表单提交。每次提交，表单的数据被浏览器用编码到"),s("code",[t._v("HTTP")]),t._v("请求的"),s("code",[t._v("body")]),t._v("里。浏览器发出的"),s("code",[t._v("POST")]),t._v("请求的"),s("code",[t._v("body")]),t._v("主要有有两种格式，一种是"),s("code",[t._v("application/x-www-form-urlencoded")]),t._v("用来传输简单的数据，大概就是"),s("code",[t._v('"key1=value1&key2=value2"')]),t._v("这样的格式。另外一种是传文件，会采用"),s("code",[t._v("multipart/form-data")]),t._v("格式。采用后者是因为"),s("code",[t._v("application/x-www-form-urlencoded")]),t._v("的编码方式对于文件这种二进制的数据非常低效。")]),t._v(" "),s("li",[t._v("浏览器在"),s("code",[t._v("POST")]),t._v("一个表单时，"),s("code",[t._v("url")]),t._v("上也可以带参数，只要"),s("code",[t._v('<form action="url" >')]),t._v("里的"),s("code",[t._v("url")]),t._v("带"),s("code",[t._v("querystring")]),t._v("就行。只不过表单里面的那些用"),s("code",[t._v("<input>")]),t._v(" 等标签经过用户操作产生的数据都在会在"),s("code",[t._v("body")]),t._v("里。我们一般会泛泛的说“"),s("code",[t._v("GET")]),t._v("请求没有"),s("code",[t._v("body")]),t._v("，只有"),s("code",[t._v("url")]),t._v("，请求数据放在"),s("code",[t._v("url")]),t._v("的"),s("code",[t._v("querystring")]),t._v("中；"),s("code",[t._v("POST")]),t._v("请求的数据在"),s("code",[t._v("body")]),t._v("中。但这种情况仅限于"),s("strong",[t._v("浏览器发请求的场景。")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ajax")]),t._v("中的"),s("code",[t._v("get/post")])]),t._v(" "),s("ul",[s("li",[t._v("对于请求例如几百兆压缩二进制流的请求体，服务器端接收到请求后，就可以先拿到请求头部，查看用户是不是有权限上传，文件名是不是符合规范等。如果不符合，就不再处理请求体的数据了，直接丢弃。为了进一步优化，客户端可以利用"),s("code",[t._v("HTTP")]),t._v("的"),s("code",[t._v("Continued")]),t._v("协议来这样做：客户端总是先发送所有请求头给服务器，让服务器校验。如果通过了，服务器回复"),s("code",[t._v("“100 - Continue”")]),t._v("，客户端再把剩下的数据发给服务器。如果请求被拒了，服务器就回复个"),s("code",[t._v("400")]),t._v("之类的错误，这个交互就终止了。所以就会误认为"),s("code",[t._v("POST")]),t._v("需要发送两个请求。")]),t._v(" "),s("li",[t._v("对于"),s("code",[t._v("GET")]),t._v("方式的请求，浏览器会把"),s("code",[t._v("http header")]),t._v("和"),s("code",[t._v("data")]),t._v("一并发送出去，服务器响应"),s("code",[t._v("200")]),t._v("（返回数据）；")])])]),t._v(" "),s("li",[s("p",[t._v("幂等（意思是多次执⾏相同的操作，结果都是「相同」的）")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("GET")]),t._v(" ⽅法就是安全且幂等的，因为它是「只读」操作，⽆论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。")]),t._v(" "),s("li",[s("code",[t._v("POST")]),t._v(" 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是不安全的，且多次提交数据就会创建多个资源，所以不是幂等的。")])])])])]),t._v(" "),s("h2",{attrs:{id:"formdata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#formdata"}},[t._v("#")]),t._v(" "),s("code",[t._v("FormData")])]),t._v(" "),s("p",[s("code",[t._v("XMLHttpRequest 2级")]),t._v("定义了该类型，为序列化表单以及创建与表单格式相同的数据提供便利")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Nicholas'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("使用"),s("code",[t._v("FormData")]),t._v("的方便之处体现在不必明确地在"),s("code",[t._v("XHR")]),t._v("对象上设置请求头部。"),s("code",[t._v("XHR")]),t._v("对象能够识别传入的数据类型是"),s("code",[t._v("FormData")]),t._v("的实例，并配置合适的头部信息。")])])}),[],!1,null,null,null);s.default=e.exports}}]);