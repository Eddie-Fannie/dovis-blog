(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{460:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vue的精髓-组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue的精髓-组件"}},[s._v("#")]),s._v(" Vue的精髓--组件")]),s._v(" "),a("h2",{attrs:{id:"组件的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的分类"}},[s._v("#")]),s._v(" 组件的分类")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("由 "),a("code",[s._v("vue-router")]),s._v(" 产生的每个页面，本质上也是组件。这类组件相对是最好写的，因为主要是还原设计稿，完成需求，不需要太多模块和架构设计上的考虑。")])]),s._v(" "),a("li",[a("p",[s._v("不包含业务，独立，具体功能的基础组件，比如日期选择器，模态框等。")])]),s._v(" "),a("li",[a("p",[s._v("业务组件，它与独立组件的区别是，业务组件只在当前项目中会用到，不具有通用性，而且会包含一些业务，比如数据请求；而独立组件不含业务，在任何项目中都可以使用，功能单一，比如一个具有数据校验功能的输入框。")])])]),s._v(" "),a("h2",{attrs:{id:"组件的构成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的构成"}},[s._v("#")]),s._v(" 组件的构成")]),s._v(" "),a("blockquote",[a("p",[s._v("一个再复杂的组件，都是由三部分组成的："),a("code",[s._v("prop")]),s._v("、"),a("code",[s._v("event")]),s._v("、"),a("code",[s._v("slot")]),s._v("，它们构成了"),a("code",[s._v("Vue.js")]),s._v(" 组件的"),a("code",[s._v("API")]),s._v("。如果你开发的是一个通用组件，那一定要事先设计好这三部分。")])]),s._v(" "),a("h3",{attrs:{id:"属性prop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性prop"}},[s._v("#")]),s._v(" 属性prop")]),s._v(" "),a("blockquote",[a("p",[s._v("写通用组件时，"),a("code",[s._v("props")]),s._v("最好用"),a("strong",[s._v("对象")]),s._v("的写法，这样可以针对每个属性设置类型、默认值或自定义校验属性的值，这点在组件开发中很重要，然而很多人却忽视，直接使用 "),a("code",[s._v("props")]),s._v(" 的数组用法，这样的组件往往是不严谨的。")])]),s._v(" "),a("h3",{attrs:{id:"插槽slot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插槽slot"}},[s._v("#")]),s._v(" 插槽slot")]),s._v(" "),a("h3",{attrs:{id:"自定义事件event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义事件event"}},[s._v("#")]),s._v(" 自定义事件event")]),s._v(" "),a("h2",{attrs:{id:"组件的通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的通信"}},[s._v("#")]),s._v(" 组件的通信")]),s._v(" "),a("p",[s._v("Vue.js内置的通信手段一般有两种：")]),s._v(" "),a("ol",[a("li",[a("p",[a("code",[s._v("ref")]),s._v(": 给元素或组件注册引用信息")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("$(parent, children)")]),s._v("访问父,子实例.")])])]),s._v(" "),a("p",[s._v("这两种通信手段都无法实现跨级通信，以往会借助"),a("code",[s._v("Vuex")]),s._v("或"),a("code",[s._v("Bus")]),s._v("这样都解决方案，不得不引入第三方库来支持。下面介绍一种无依赖都组件通信方法："),a("code",[s._v("Vue.js")]),s._v("内置都"),a("code",[s._v("provide/inject")]),s._v("接口。")]),s._v(" "),a("blockquote",[a("p",[s._v("这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立都时间里始终生效。")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// B是A的子组件")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//A.vue")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n​    provide"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n​        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Aresn'")]),s._v("\n​    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//B.vue")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n​    inject"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n​    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mounted")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n​        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Aresn")]),s._v("\n​    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("在 A.vue 里，我们设置了一个 "),a("strong",[s._v("provide: name")]),s._v(" ，值为 Aresn，它的作用就是将 "),a("strong",[s._v("name")]),s._v(" 这个变量提供给它的所有子组件。而在 B.vue 中，通过 "),a("code",[s._v("inject")]),s._v(" 注入了从 A 组件中提供的 "),a("strong",[s._v("name")]),s._v(" 变量，那么在组件 B 中，就可以直接通过 "),a("strong",[s._v("this.name")]),s._v(" 访问这个变量了，它的值也是 Aresn。这就是 provide / inject API 最核心的用法。")])]),s._v(" "),a("li",[a("p",[s._v("provide 和 inject 绑定并"),a("strong",[s._v("不是可响应")]),s._v("的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。所以，上面 A.vue 的 name 如果改变了，B.vue 的 this.name 是不会改变的，仍然是 Aresn。")])])]),s._v(" "),a("h3",{attrs:{id:"利用provide-inject替代vuex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#利用provide-inject替代vuex"}},[s._v("#")]),s._v(" 利用provide&inject替代Vuex")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("Vuex")]),s._v("，最主要的目的是跨组件通信、全局数据维护、多人协同开发。需求比如有：用户的登录信息维护、通知信息维护等全局的状态和数据。")]),s._v(" "),a("p",[s._v("一般在 webpack 中使用 Vue.js，都会有一个入口文件 ****main.js****，里面通常导入了 Vue、VueRouter、iView 等库，通常也会导入一个入口组件 "),a("code",[s._v("app.vue")]),s._v(" 作为根组件。一个简单的 app.vue 可能只有以下代码：")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n​    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("router"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("router"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("blockquote",[a("p",[s._v("使用"),a("code",[s._v("provide/inject")]),s._v("替代"),a("code",[s._v("vuex")]),s._v("，就是在"),a("code",[s._v("app.vue")]),s._v("上做文章。因为你的项目中所有的组件（包含路由），它的父组件（或根组件）都是 "),a("code",[s._v("app.vue")]),s._v("，所以我们"),a("strong",[s._v("把整个 app.vue 实例通过provide对外提供")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n​    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("router"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("router"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n​      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("provide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n​          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n​              app"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n\n​          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n​      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("blockquote",[a("p",[s._v("上面代码中我们把"),a("code",[s._v("app.vue")]),s._v("实例"),a("code",[s._v("this")]),s._v("对外提供，命名为"),a("code",[s._v("app")]),s._v("，使用这个名字后子组件不能再使用它作为局部属性。接下来任何组件（或路由）只要通过 "),a("code",[s._v("inject")]),s._v(" 注入 "),a("code",[s._v("app.vue")]),s._v(" 的 "),a("code",[s._v("app")]),s._v(" 的话，都可以直接通过 "),a("strong",[s._v("this.app.xxx")]),s._v(" 来访问 "),a("code",[s._v("app.vue")]),s._v(" 的 "),a("code",[s._v("data")]),s._v("、"),a("code",[s._v("computed")]),s._v("、"),a("code",[s._v("methods")]),s._v(" 等内容。")])]),s._v(" "),a("h2",{attrs:{id:"自行实现父子组件间通信的方法dispatch-和-broadcast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自行实现父子组件间通信的方法dispatch-和-broadcast"}},[s._v("#")]),s._v(" 自行实现父子组件间通信的方法dispatch 和 broadcast")]),s._v(" "),a("p",[a("code",[s._v("provide / inject API")]),s._v(" 主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。然后有两种场景它不能很好的解决：")]),s._v(" "),a("ul",[a("li",[s._v("父组件向子组件（支持跨级）传递数据；")]),s._v(" "),a("li",[s._v("子组件向父组件（支持跨级）传递数据；")])])])}),[],!1,null,null,null);a.default=n.exports}}]);